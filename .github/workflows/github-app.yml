name: Github App

on:
  workflow_call:
    secrets:
      SETUP_APP_ID:
        required: true
      SETUP_APP_PRIVATE_KEY:
        required: true
jobs:
  next_js_ci:
    name: Run Next.js / React.js CI
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2

      - name: get jwt
        run: |
          token=$(./lib/github-app-token.sh)
          echo $token
          echo "token=$token" >> $GITHUB_OUTPUT
        env:
            APP_ID: ${{ secrets.SETUP_APP_ID }}
            APP_PRIVATE_KEY: ${{ secrets.SETUP_APP_PRIVATE_KEY }}
      
      